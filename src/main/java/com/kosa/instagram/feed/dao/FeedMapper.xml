<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kosa.instagram.feed.dao.IFeedRepository">

<<<<<<< HEAD
<insert id="writeReply" parameterType="com.kosa.instagram.feed.model.ReplyVo">
<![CDATA[	
	INSERT INTO reply(reply_no, feed_no, member_id, reply_content, reply_date)
	VALUES (#{replyNo}, #{feedNo}, #{memberId}, #{replyContent}, SYSDATE)
]]>
</insert>

<delete id="deleteReply" parameterType="int">
<![CDATA[
	DELETE FROM reply WHERE reply_no=#{replyNo}
]]>
</delete>

<insert id="increaseLike">
<![CDATA[
	INSERT INTO like_table(feed_no, member_id)
	VALUES (#{feedNo}, #{memberId})
]]>
</insert>

<delete id="decreaseLike" parameterType="int">
<![CDATA[
	DELETE FROM like_table WHERE feed_no=#{feedNo}
]]>
</delete>

<insert id="makeLog" parameterType="com.kosa.instagram.LogVo">
<![CDATA[
	INSERT INTO log(log_no, log_time, log_uri, member_id, log_keyword, feed_no, log_like_check)
	VALUES (#{logNo}, #{logTime}, #{logURI}, #{memberId}, #{logKeyword}, #{feedNo}, #{logLikeCheck})
]]>
</insert>

<select id="getFeed" parameterType="String" resultType="com.kosa.instagram.feed.model.FeedVo">
<![CDATA[
	SELECT 
		feed_no AS "feedNo",
		member_id AS "memberId",
		feed_content AS "feedContent",
		upload_date AS "uploadDate",
		place AS "place"
	FROM feed
	WHERE f.feed_no=#{feedNo}
]]>
</select>
=======
	<select id="countContent" parameterType="String" resultType="int">
		<![CDATA[
			select count(feed_no) 
			from feed
			where member_id=#{memberId}
		
		]]>
	</select>
	
	<select id="countFollower" parameterType="String" resultType="int">
		<![CDATA[
			select count(from_id)
			from follow
			where to_id=#{memberId}
		]]>
	</select>
	
	<select id="countFollow" parameterType="String" resultType="int">
		<![CDATA[
			select count(to_id)
			from follow
			where from_id=#{memberId}
		]]>
	</select>
	
	<select id="selectFollowerByUser" parameterType="String" resultType="String">
		<![CDATA[
			select nickname
			from member
			where member_id=(select from_id 
				   from follow 
				   where to_id=#{memberId});
		]]>
	</select>
	
	<select id="selectFollowByUser" parameterType="String" resultType="String">
		<![CDATA[
			select nickname
			from member
			where member_id=(select to_id
							from follow
							where from_id=#{memebrId});
		]]>
	</select>
	
	<select id="selectContentListByUser" parameterType="String" resultType="byte">
		<![CDATA[
			select file_data
			from file
			where feed_no in (select feed_no
							  from feed
							  where member_id=${memberId});
			
		]]>
	</select>
	
	
	

>>>>>>> branch 'master' of https://github.com/yunghun0815/prj_instagram.git
</mapper>